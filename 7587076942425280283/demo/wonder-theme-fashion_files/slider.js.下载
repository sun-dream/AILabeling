import Swiper from"./swiper-bundle.esm.browser.min.js";const ANIMATION_CLASSES=["scroll-trigger","animate--slide-in"],ANIMATION_MOBILE_DISABLED_CLASS="disabled-on-mobile";function getSlideAnimTarget(slide){const directDiv=slide.querySelector(":scope > div");if(directDiv)return directDiv;const first=slide.firstElementChild;return first&&first.tagName==="DIV"?first:null}function markInitialVisibleSlides(swiper,{disableOnMobile=!1,cascade=!0,animClasses=ANIMATION_CLASSES,mobileDisabledClass=ANIMATION_MOBILE_DISABLED_CLASS,cascadeAttrName="data-cascade",orderVarName="--animation-order",orderStart=1,force=!1}={}){if(!swiper||!swiper.slides||swiper.slides.length===0){console.warn("markInitialVisibleSlides(): swiper or slides doesn't exist",{swiper:!!swiper,slides:!!swiper?.slides,slidesLength:swiper?.slides?.length});return}if(swiper.__initAnimated&&!force)return;swiper.slides.forEach(slide=>{const target=getSlideAnimTarget(slide);target&&(target.classList.remove(...animClasses,...disableOnMobile?[mobileDisabledClass]:[]),cascade&&(target.removeAttribute(cascadeAttrName),target.style.removeProperty(orderVarName)))});let visible=Array.from(swiper.slides).filter(slide=>slide.classList.contains("swiper-slide-visible"));if(visible.length===0){let inViewCount=1;const spv=swiper.params?.slidesPerView;if(typeof spv=="number")inViewCount=Math.max(1,spv);else try{inViewCount=Math.max(1,Math.round(typeof swiper.slidesPerViewDynamic=="function"?swiper.slidesPerViewDynamic("current",!0):1))}catch{inViewCount=1}const start=swiper.activeIndex??0;visible=Array.from({length:inViewCount}).map((_,i)=>swiper.slides[start+i]).filter(Boolean)}visible.forEach((slide,i)=>{const target=getSlideAnimTarget(slide);target&&(target.classList.add(...animClasses,...disableOnMobile?[mobileDisabledClass]:[]),cascade&&(target.setAttribute(cascadeAttrName,""),target.style.setProperty(orderVarName,String(orderStart+i))))}),swiper.__initAnimated=!0}customElements.get("slideshow-section")||customElements.define("slideshow-section",class extends HTMLElement{constructor(){super(),this.swiper=null,this.configuration=null,this.handleKeyboard=this.handleKeyboard.bind(this)}handleTabindex(swiper){const isSlidesGroup=this.hasAttribute("data-slides-group"),focusableSelectors="a, button, input, textarea, select, [tabindex]",totalSlides=swiper.slides.length,slidesPerView=swiper.params.slidesPerView;swiper&&totalSlides>slidesPerView?swiper.slides.forEach(slide=>{if(isSlidesGroup){const slideRect=slide.getBoundingClientRect(),swiperRect=this.getBoundingClientRect(),isFullyVisible=slideRect.left>=swiperRect.left&&slideRect.right<=swiperRect.right&&slideRect.top>=swiperRect.top&&slideRect.bottom<=swiperRect.bottom;slide.querySelectorAll(focusableSelectors).forEach(el=>{isFullyVisible?el.setAttribute("tabindex","0"):el.setAttribute("tabindex","-1"),el.hasAttribute("data-omit-tabindex")&&el.setAttribute("tabindex","-1")})}else swiper.slides.forEach(slide2=>{slide2.querySelectorAll(focusableSelectors).forEach(el=>{el.setAttribute("tabindex","-1")})}),swiper.slides[swiper.activeIndex]?.querySelectorAll(focusableSelectors).forEach(el=>{el.setAttribute("tabindex",el.hasAttribute("data-omit-tabindex")?"-1":"0")})}):swiper.slides.forEach(slide=>{slide.querySelectorAll(focusableSelectors).forEach(el=>{el.setAttribute("tabindex",el.hasAttribute("data-omit-tabindex")?"-1":"0")})})}handleKeyboard(event){const keyCode=event.keyCode||event.which,focusedElement=document.activeElement;if(this.swiper&&this.swiper.el.contains(focusedElement))switch(keyCode){case 37:this.swiper.slidePrev();break;case 39:this.swiper.slideNext();break}}connectedCallback(){this.readConfiguration(),this.initializeOrDestroySwiperForBrands=this.initializeOrDestroySwiperForBrands.bind(this),this.centerNavigation=this.centerNavigation.bind(this),this.shouldSkipCenterNavMethod=this.dataset.skipCenterNavMethod==="true",window.innerWidth<900&&!this.swiper&&this.swiperInitilize(),window.addEventListener("resize",this.centerNavigation),this.dataset.brands==="true"?window.addEventListener("resize",this.initializeOrDestroySwiperForBrands):this.configuration.enableOnMedia?(window.addEventListener("resize",this.matchResolution.bind(this)),this.breakpoint=window.matchMedia(this.configuration.enableOnMedia),this.matchResolution()):this.swiper||this.swiperInitilize(),window.addEventListener("keydown",this.handleKeyboard)}disconnectedCallback(){window.removeEventListener("resize",this.initializeOrDestroySwiperForBrands),window.removeEventListener("resize",this.centerNavigation),window.removeEventListener("keydown",this.handleKeyboard)}initializeOrDestroySwiperForBrands(){window.innerWidth<900?this.swiper||this.swiperInitilize():this.swiper&&this.swiperDestroy()}centerNavigation(){if(window.innerWidth<900||this.shouldSkipCenterNavMethod)return;const picture=this.querySelector("picture")?.classList.contains("hero__pic--mobile")?this.querySelectorAll("picture")[1]:this.querySelector("picture");if(picture){const boundingClientRectPic=picture.getBoundingClientRect();this.querySelectorAll(".wt-slider__nav-btn").forEach(btn=>btn.style.top=`${22+boundingClientRectPic.height/2}px`)}}_cleanupSlideAnimations(swiper){swiper.slides.forEach(slide=>{const target=getSlideAnimTarget(slide);target&&(target.classList.remove(...ANIMATION_CLASSES,ANIMATION_MOBILE_DISABLED_CLASS),target.removeAttribute("data-cascade"),target.style.removeProperty("--animation-order"))}),swiper.__initAnimated=!1}_syncInitialAnimations(swiper,{force=!1}={}){const animationEnabled=!!this.configuration.enableAnimation,disableOnMobile=!!this.configuration.disableAnimationOnMobile;if(!animationEnabled){this._cleanupSlideAnimations(swiper);return}setTimeout(()=>{markInitialVisibleSlides(swiper,{disableOnMobile,force})},0)}readConfiguration(){const default_configuration={autoHeight:!1,slidesPerView:1,autoplay:!1,threshold:5,watchSlidesProgress:!0,enableAnimation:!1,disableAnimationOnMobile:!1,pagination:{el:".swiper-pagination",renderBullet(index,className){return`<span class="${className} swiper-pagination-bullet--svg-animation"><svg width="20" height="20" viewBox="0 0 28 28"><circle class="svg__circle" cx="14" cy="14" r="12" fill="none" stroke-width="2"></circle><circle class="svg__circle-inner" cx="14" cy="14" r="5" stroke-width="2"></circle></svg></span>`}},navigation:{nextEl:".wt-slider__nav-next",prevEl:".wt-slider__nav-prev"},scrollbar:!1,on:{afterInit:swiper=>{this._syncInitialAnimations(swiper,{force:!1});const dataSwiper=this.querySelector("[data-swiper]"),dataSwiperContainer=this.querySelector("[data-swiper-container]");dataSwiper?.classList.remove("loading"),dataSwiperContainer?.classList.remove("loading"),this.centerNavigation(),this.handleTabindex(swiper)},resize:swiper=>{this._syncInitialAnimations(swiper,{force:!0})},slideChangeTransitionEnd:swiper=>{this.handleTabindex(swiper)}}},get_custom_configuration=this.querySelector("[data-swiper-configuration]")?.innerHTML,custom_configuration=get_custom_configuration?JSON.parse(get_custom_configuration):{};if(this.configuration={...default_configuration,...custom_configuration},this.configuration.autoplay){if(window.innerWidth<900)var override_configuration={autoplay:!1};this.configuration={...this.configuration,...override_configuration}}}matchResolution(){this.breakpoint.matches===!0?this.swiper||this.swiperInitilize():this.swiper&&this.swiperDestroy()}swiperInitilize(){if(this.swiper)return;const containerEl=this.querySelector("[data-swiper]"),wrapperEl=this.querySelector("[data-swiper-container]"),slideEls=this.querySelectorAll("[data-swiper-slide]");if(!containerEl||!wrapperEl){console.warn("[slideshow-section] Missing required elements for Swiper init.",{container:!!containerEl,wrapper:!!wrapperEl});return}slideEls.forEach(el=>{el.classList.remove(...ANIMATION_CLASSES,ANIMATION_MOBILE_DISABLED_CLASS)}),containerEl.classList.add("swiper","wt-slider__container"),wrapperEl.classList.add("swiper-wrapper","wt-slider__wrapper"),slideEls.forEach(el=>el.classList.add("swiper-slide","wt-slider__slide"));const paginationEl=this.querySelector(".wt-slider__pagination")||this.querySelector(".swiper-pagination"),nextEl=this.querySelector(".wt-slider__nav-next--featured")||this.querySelector(".wt-slider__nav-next"),prevEl=this.querySelector(".wt-slider__nav-prev--featured")||this.querySelector(".wt-slider__nav-prev"),cfg={...this.configuration};if(paginationEl||cfg.pagination){const resolvedPagEl=paginationEl||(typeof cfg.pagination?.el=="string"?this.querySelector(cfg.pagination.el):cfg.pagination?.el);resolvedPagEl?cfg.pagination={clickable:!0,...cfg.pagination||{},el:resolvedPagEl}:delete cfg.pagination}if(nextEl||prevEl||cfg.navigation){const resolvedNext=nextEl||(typeof cfg.navigation?.nextEl=="string"?this.querySelector(cfg.navigation.nextEl):cfg.navigation?.nextEl),resolvedPrev=prevEl||(typeof cfg.navigation?.prevEl=="string"?this.querySelector(cfg.navigation.prevEl):cfg.navigation?.prevEl);resolvedNext&&resolvedPrev?cfg.navigation={...cfg.navigation||{},nextEl:resolvedNext,prevEl:resolvedPrev}:delete cfg.navigation}if(cfg.scrollbar){const resolvedScrollbarEl=typeof cfg.scrollbar.el=="string"?this.querySelector(cfg.scrollbar.el):cfg.scrollbar.el;resolvedScrollbarEl?cfg.scrollbar={...cfg.scrollbar||{},el:resolvedScrollbarEl}:delete cfg.scrollbar}this.swiper=new Swiper(containerEl,cfg)}swiperDestroy(){this.swiper&&(this.swiper.__initAnimated=!1,this.querySelector("[data-swiper]").classList.remove("swiper","wt-slider__container"),this.querySelector("[data-swiper-container]").classList.remove("swiper-wrapper","wt-slider__wrapper"),this.querySelectorAll("[data-swiper-slide]").forEach(function(e){e.classList.remove("swiper-slide","wt-slider__slide")}),this.swiper.destroy(),this.querySelector(".swiper-pagination")&&(this.querySelector(".swiper-pagination").innerHTML=""),this.swiper=null)}slideTo(slide){this.swiper.autoplay.stop();const index=Array.from(slide.parentNode.children).indexOf(slide);this.swiper.slideTo(index)}});
//# sourceMappingURL=/cdn/shop/t/41/assets/slider.js.map?v=104837963741301092741760474595
