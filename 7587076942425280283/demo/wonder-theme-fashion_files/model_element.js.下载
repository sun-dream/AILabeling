customElements.get("model-element")||customElements.define("model-element",class extends HTMLElement{constructor(){super(),this.initialize(),this.showModelBound=this.showModel.bind(this),this.closeButtonBound=this.closeButton.bind(this)}connectedCallback(){this.modelBtn=this.querySelector(".model-btn"),this.modelBtn?.addEventListener("click",this.showModelBound)}disconnectedCallback(){this.modelBtn?.removeEventListener("click",this.showModelBound)}getFocusableElements(){const focusableElementsSelector="button, [href], input, select, [tabindex], iframe",focusableElements=()=>Array.from(this.modelContainer.querySelectorAll(focusableElementsSelector)).filter(el=>!el.hasAttribute("disabled")&&el.tabIndex>=0);return{focusableElements,first:focusableElements()[0],last:focusableElements()[focusableElements().length-1]}}initialize(){const els=this.querySelectorAll('[data-model="true"]');this.elsArr=Array.from(els),this.ul=this.querySelectorAll("ul"),this.modelContainer=document.querySelector(".model-container"),this.modelWrapper=this.modelContainer?.querySelector(".model"),this.closeBtn=this.modelContainer?.querySelector(".close-btn"),this.iframe=this.querySelector("iframe"),this.modelContainer.addEventListener("keydown",e=>{const isTabPressed=e.key==="Tab"||e.keyCode===9||e.code==="Tab",{first,last}=this.getFocusableElements();(e.key==="Escape"||e.keyCode===27||e.code==="Escape")&&this.closeBtn.click(),isTabPressed&&(e.shiftKey&&document.activeElement===first?(last.focus(),e.preventDefault()):!e.shiftKey&&document.activeElement===last&&(first.focus(),e.preventDefault()))})}showModel(e){this.trigger=e.currentTarget,document.body.style.overflow="hidden",this.backBtn=this.modelWrapper.querySelector(".hero__button--link"),this.backBtn?.addEventListener("click",this.closeButtonBound),this.closeBtn?.addEventListener("click",this.closeButtonBound),this.modelViewer=this.querySelector("model-viewer")||this.iframe,this.modelWrapper?.insertBefore(this.modelViewer.cloneNode(!0),this.backBtn),this.modelContainer?.classList.remove("hidden"),this.closeBtn.setAttribute("tabindex","0"),this.closeBtn.focus()}closeButton(e){e?.stopPropagation(),document.body.style.overflow="auto",this.modelContainer?.classList.add("hidden"),this.backBtn?.removeEventListener("click",this.closeButtonBound),this.closeBtn?.removeEventListener("click",this.closeButtonBound);const elementToRemove=this.modelWrapper.querySelector("model-viewer")||this.modelWrapper.querySelector("iframe");elementToRemove&&this.modelWrapper.removeChild(elementToRemove),this.closeBtn.setAttribute("tabindex","-1"),this.trigger?.focus()}}),window.ProductModel={loadShopifyXR(){Shopify.loadFeatures([{name:"shopify-xr",version:"1.0",onLoad:this.setupShopifyXR.bind(this)}])},setupShopifyXR(errors){if(!errors){if(!window.ShopifyXR){document.addEventListener("shopify_xr_initialized",()=>this.setupShopifyXR());return}document.querySelectorAll('[id^="ProductJSON-"]').forEach(modelJSON=>{window.ShopifyXR.addModels(JSON.parse(modelJSON.textContent)),modelJSON.remove()}),window.ShopifyXR.setupXRElements()}}},window.addEventListener("DOMContentLoaded",()=>{window.ProductModel&&window.ProductModel.loadShopifyXR()});
//# sourceMappingURL=/cdn/shop/t/41/assets/model_element.js.map?v=158477732829452102971754657649
