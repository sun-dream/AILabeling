<section class="py-16 md:py-24 bg-[#F2F4F7]">
    <div class="container mx-auto px-4">
        <div class="flex flex-col md:flex-row gap-8">
            <!-- Col 1: Label -->
            <div class="md:w-2/12 pt-8">
                <h3 class="text-primary font-bold tracking-widest text-sm uppercase">Testimonial</h3>
            </div>

            <!-- Col 2: Title -->
            <div class="md:w-4/12 pt-8">
                <h2 class="text-4xl md:text-5xl font-bold font-maven text-secondary leading-tight">
                    Check out what our clients say
                </h2>
            </div>

            <!-- Col 3: Carousel (Buttons + Card) -->
            <div class="md:w-5/12 relative pl-0 md:pl-8">
                <!-- Arrows -->
                <div class="flex justify-end gap-4 mb-6">
                    <button id="prev-review"
                        class="w-12 h-12 rounded-full border border-gray-300 flex items-center justify-center hover:bg-white hover:shadow-md transition-all text-gray-500 hover:text-secondary bg-transparent">
                        <i data-lucide="chevron-left" class="w-6 h-6"></i>
                    </button>
                    <button id="next-review"
                        class="w-12 h-12 rounded-full border border-gray-300 flex items-center justify-center hover:bg-white hover:shadow-md transition-all text-gray-500 hover:text-secondary bg-transparent">
                        <i data-lucide="chevron-right" class="w-6 h-6"></i>
                    </button>
                </div>

                <!-- Testimonial Card -->
                <div class="relative h-[308px]">
                    <div id="review-container"
                        class="bg-white p-6 md:p-6 shadow-sm transition-opacity duration-300 opacity-100 h-full flex flex-col justify-between">
                        <p id="review-text" class="text-gray-600 text-lg leading-relaxed mb-8 line-clamp-6">
                            <!-- Content injected via JS -->
                        </p>
                        <div class="flex items-end justify-between mt-auto">
                            <div class="font-bold text-secondary text-xl" id="review-author">
                                <!-- Author injected via JS -->
                            </div>
                            <img src="https://cdn-ildpmmp.nitrocdn.com/AMiutLZIERmywvLxUwscmRkyAarnfjmd/assets/images/optimized/rev-f80340c/www.zicklincontracting.com/wp-content/uploads/2024/09/Fox-Hub.png"
                                alt="Fox Hub" class="w-12 h-12 object-contain" />
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        (function () {
            const testimonials = [
                {
                    text: "I cannot praise Zicklin Contractors highly enough. I had to handle some home repairs from abroad before selling a flat in NY, and Raja and his team were an absolute pleasure to work with swift with comms, professional and thorough in their report, and direct in managing expectations on the overall project. Thank you lots, Zicklin!",
                    author: "Daisy de Plume"
                },
                {
                    text: "We had a great experience with Zicklin. We required brickpointing, repair and waterproofing of a portion of our home, and concrete repair around our house. They were able to start in a timely matter. They constantly checked in with us regarding the quality of their work. They made sure that everything requested was completed. The workmen were respectful of the property.",
                    author: "Leiana Richardson"
                },
                {
                    text: "I am so happy we went with Zicklin Construction to complete our renovations! They not only helped us to make our home more beautiful and accessible by way of repairing water-damaged walls, updating one of our bathrooms, and building a ramp, but they also did so while providing unmatched customer service and consistent consideration for my sick grandmother and her space.",
                    author: "Megan G. Astoria"
                },
                {
                    text: "Had a great experience working with Zicklin Contracting to waterproof our roof deck and fix some leaks on our apartment's exterior walls and brick pointing on my entire building. Our building, MGMT, also uses Zicklin for a variety of projects. They're reliable, give fair prices and do great work.",
                    author: "Ashley Palucci"
                },
                {
                    text: "Great communication throughout the project, which is already better than other contractors I've worked with. The work is good and efficient, and I am getting what I'm paying for, so overall, I am happy about the outcome.",
                    author: "Kj L."
                }
            ];

            let currentIndex = 0;
            const container = document.getElementById('review-container');
            const textEl = document.getElementById('review-text');
            const authorEl = document.getElementById('review-author');
            const prevBtn = document.getElementById('prev-review');
            const nextBtn = document.getElementById('next-review');

            // Initialize content
            function updateContent(index) {
                textEl.textContent = testimonials[index].text;
                authorEl.textContent = testimonials[index].author;
            }

            // Initial render
            if (testimonials.length > 0) {
                updateContent(0);
            }

            function fadeTransition(nextIndex) {
                // Fade out
                container.classList.add('opacity-0');

                setTimeout(() => {
                    updateContent(nextIndex);
                    // Fade in
                    container.classList.remove('opacity-0');
                }, 300); // Reduced duration for snappier feel
            }

            if (prevBtn && nextBtn) {
                prevBtn.addEventListener('click', () => {
                    currentIndex = (currentIndex - 1 + testimonials.length) % testimonials.length;
                    fadeTransition(currentIndex);
                });

                nextBtn.addEventListener('click', () => {
                    currentIndex = (currentIndex + 1) % testimonials.length;
                    fadeTransition(currentIndex);
                });
            }

            // Re-initialize Lucide icons for the buttons since this script runs after main Lucide init
            if (window.lucide) {
                window.lucide.createIcons();
            }
        })();
    </script>
</section>